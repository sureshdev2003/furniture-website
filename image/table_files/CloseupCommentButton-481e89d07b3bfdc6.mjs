"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[78602],{363656:(e,t,n)=>{n.r(t),n.d(t,{default:()=>i});let o={argumentDefinitions:[],kind:"Fragment",metadata:null,name:"CloseupCommentButton_pin",selections:[{args:null,kind:"FragmentSpread",name:"CommentsPopover_pin"},{args:null,kind:"FragmentSpread",name:"useIsInCloseupShoppingRefinementsExp_pin"}],type:"Pin",abstractKey:null};o.hash="3d1d4611865160c21208a3565b935491";let i=o},466107:(e,t,n)=>{n.r(t),n.d(t,{default:()=>_});var o,i=n(667294);n(422578);var l=n(883119),r=n(203870),s=n(241828),a=n(19963),d=n(78039),m=n(41086),c=n(233846),p=n(112800),u=n(93002),f=n(12624),h=n(757653),g=n(785893);let x=(0,h.Z)(()=>n.e(12167).then(n.bind(n,752809)),void 0,e=>752809,"CommentsPopover"),v=void 0!==o?o:o=n(363656);function _({inCommentsImprovedDropdownExp:e,inCommentsPopoverExp:t,isEligibleForAggregatedComments:n,pinKey:o,shouldShowCommentCount:h,totalCommentCount:_,viewParameter:C,viewType:w}){let F=(0,c.ZP)(),b=(0,f.t)(),y=(0,d.Z)(v,o),{isCommentThreadExpanded:j,setIsCommentThreadExpanded:T}=(0,u.x4)(),{logContextEvent:I}=(0,a.v)(),{isInCloseupShoppingRefinementsExp:P}=(0,r.Z)({pinKey:y}),k=(0,i.useRef)(null),E=t&&j,S=F._('Comments', 'Closeup.Comment.Icon', 'Icon for scrolling comments into view'),L=t=>{I({component:13464,element:2,event_type:10554,view_parameter:C,view_type:w}),(0,p.tj)("dweb.closeup_comment_button.community_view_intent",{tags:{experimentGroup:e?"improved_dropdown":"popover",clickSource:t}})},Z=t=>{let n=document.getElementById("canonical-card"),o=P&&document.querySelector('[data-root-margin="search-one-bar"]'),i=s.Lu+s.uS,l=32;o&&(l+=i);let r=b+l;if(n){let o=n.getBoundingClientRect().top+window.scrollY-r;if(e){let e=null,n=()=>{e&&clearTimeout(e),e=setTimeout(()=>{T?.(!0),L(t),window.removeEventListener("scroll",n)},100)};window.addEventListener("scroll",n,{passive:!0}),n()}window.scrollTo({top:o,behavior:"smooth"})}},B=e=>{t?j?T?.(!1):(T?.(!0),L(e)):Z(e)};return(0,g.jsxs)(l.xu,{children:[E&&(0,g.jsx)(x,{anchorRef:k,pinKey:y,setIsOpen:T,viewParameter:C}),(0,g.jsxs)(l.kC,{alignItems:"center",direction:"row",children:[(0,g.jsx)(l.hU,{ref:k,accessibilityLabel:S,disabled:!n,icon:"speech-outline",onClick:()=>B("icon"),selected:E,size:"lg",tooltip:{text:S}}),h&&(0,g.jsx)(l.iP,{disabled:!n,onTap:()=>B("count"),children:(0,g.jsx)(l.xv,{weight:"bold",children:(0,g.jsx)(m.Z,{shortform:!0,shortformMaximumFractionDigits:1,value:_})})})]})]})}},241828:(e,t,n)=>{n.d(t,{EA:()=>a,G4:()=>d,JC:()=>l,KC:()=>s,Lu:()=>o,TY:()=>p,WU:()=>c,aI:()=>m,jf:()=>r,uS:()=>i});let o=58,i=12,l=3,r=8,s=(e,t,n)=>{let o=[];return(e&&t||!e&&n)&&o.push("linear-gradient(to left, #FFFFFF, rgba(255,255,255,0) 40px)"),(e&&n||!e&&t)&&o.push("linear-gradient(to right, #FFFFFF, rgba(255,255,255,0) 40px)"),o.join(",")},a=32,d={display:{backgroundColorHex:["#efefef","#292929"],selectedBackgroundColorHex:["#292929"],icon:3,textColorHex:["#111111","#ffffff"],selectedTextColorHex:["#ffffff"]},moduleType:0,id:""},m=-1,c=120,p={moduleType:-1,id:""}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/CloseupCommentButton-481e89d07b3bfdc6.mjs.map