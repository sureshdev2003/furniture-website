"use strict";(self.modernJsonp=self.modernJsonp||[]).push([[68357],{900095:(e,t,n)=>{n.r(t),n.d(t,{default:()=>x});var i=n(667294),r=n(545007),a=n(883119),o=n(868977),s=n(265332),m=n(228028),d=n(19963),l=n(18644),c=n(231333),u=n(233846),_=n(693806),g=n(339908),p=n(882368),f=n(644849),h=n(93002),y=n(617100),C=n(785893);function x({aggregatedPinDataId:e,closeupAttributionId:t,commentCount:n,disablePhotoCommentSelection:x,inCommentsImprovedDropdownExp:S,isEligibleForPinReactions:A,isPDP:E,orbacSubjectId:Z,pinId:I,privatePin:P,reactionByMe:j,reactionCounts:v,setIsLoadingNewlyCreatedComment:w,showCommentComposer:N,showReactBackground:b,storyPinDataId:T,viewParameter:k}){let D,J=(0,u.ZP)(),M=(0,p.Z)(),O=(0,r.I0)(),{logContextEvent:z}=(0,d.v)(),B=(0,o.Z)(),{showOneToast:L}=(0,g.F9)(),{closeupWithinMasonryEnabled:R,peekCloseupEnabled:W,clientTrackingParams:F}=(0,h.x4)(),[U,G]=(0,i.useState)(!1),[H,K]=(0,i.useState)(s.A9.NONE);D=E?R?2:8:+!!R;let q=8*!!E;async function Q(n){let{commentMedia:i,contentMarkdown:r,force:a,imageSignatures:o,tags:m}=n;if(null===e)return!1;w(!0);try{if(e){if(o.length){let t={aggregatedPinDataId:e,details:r,image_signatures:o,pin_id:I??"",username:M.isAuth?M.username:"",fromUnifiedComment:!0};await O((0,y.DD)(t))}else await B({commentMedia:i,force:a,fromUnifiedComment:!0,objectType:f.o.pin,objectId:e,pinId:I,tags:m,text:r,orbacSubjectId:Z});z({event_type:7,clientTrackingParams:F,object_id_str:I,aux_data:{num_user_mention_tags:(m?JSON.parse(m):[]).length,...T?{creator_id:t,story_pin_data_id:T}:{}}})}}catch(e){return[_.ky,_.LJ].includes((0,l.Z)(e,"api_error_code")??0)?K((0,l.Z)(e,"api_error_code")===_.ky?s.A9.WARNING:s.A9.BLOCK):L(({hideToast:t})=>(0,C.jsx)(c.Z,{onHide:t,text:(0,l.Z)(e,"message_detail")||(0,l.Z)(e,"message")||J._('There was an issue posting your comment.', 'comment.post.errorMessage', 'error message for posting comment in toast'),type:"error"})),w(!1),!1}return G(!1),w(!1),!0}let{marginEnd:V,marginStart:X}=W?{marginEnd:4,marginStart:4}:R?{marginEnd:0,marginStart:0}:{marginEnd:D,marginStart:q};return(0,C.jsx)(a.xu,{marginEnd:V,marginStart:X,children:(0,C.jsx)(m.Z,{clientTrackingParams:F,commentCount:n,commentWarningModalState:H,disablePhotoCommentSelection:x,dismissCommentWarningModal:()=>K(s.A9.NONE),iconSize:E?20:void 0,inCommentsImprovedDropdownExp:S,isEligibleForPinReactions:A,isLeftAligned:E,objectType:f.o.pin,onAddItem:Q,onCancelItem:()=>G(!1),onEnter:()=>G(!0),pinId:I,privatePin:P,reactionByMe:j,reactionCounts:v,showCommentComposer:N,showReactBackground:!E&&b,statusType:U?"textInflightCreation":"textStaticDisplay",viewParameter:k})})}}}]);
//# sourceMappingURL=https://sm.pinimg.com/webapp/app-common-react-components-closeup-CloseupBody-CloseupInlineCommentComposer-6db1456d17c1600f.mjs.map